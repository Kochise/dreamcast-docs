<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><TITLE>CBaseInputPin Class</TITLE>
<STYLE>
<!--
.tctop {color: blue}
.cpslug {color: blue; text-decoration: none}
-->
</STYLE>
<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
function ShowButtons() {
    if (window.top.frames.length!=0 && window.top.frames[0].ShowButtons!=null)
	window.top.frames[0].ShowButtons('/dssd0194.htm','/dssd0000.htm','/dssd0180.htm','/index.htm','/dssd0196.htm');
}
ShowButtons();
//-->
</SCRIPT>
</HEAD>
<BODY onLoad="ShowButtons()" TOPMARGIN=10 BGPROPERTIES="FIXED" BGCOLOR="#FFFFFF" LINK="#000000" VLINK="#808080" ALINK="#000000">
<FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="Lib_000106020f000000">CBaseInputPin Class</A></H2>
<BR CLEAR=ALL>
<P><IMG SRC="art/filter07.gif" WIDTH="315" HEIGHT="229" ALT="CBaseInputPin class hierarchy" >

<P><B>CBaseInputPin</B> is an abstract base class derived from <A HREF="dssd0200.htm" TARGET="TEXT">CBasePin</A> that adds 
support for <A HREF="dssd0161.htm" TARGET="TEXT">IMemInputPin</A> in addition to the <A HREF="dssd0165.htm" TARGET="TEXT">IPin</A> interface support provided by 
<B>CBasePin</B>. Its <A HREF="dssd0161.htm#If_0001060149030100" TARGET="TEXT">IMemInputPin::GetAllocator</A> method returns a 
<A HREF="dssd0230.htm" TARGET="TEXT">CMemAllocator</A> object. Derive your input pin from this class.

<P>All member functions in this class that return <A HREF="dssd0293.htm#errcodes_0001060a01000001" TARGET="TEXT">HRESULT</A> and accept a pointer as a 
parameter return E_POINTER when passed a null pointer. 

<A NAME="Lib_000106020f010000"></A><P><B>Protected Data Members</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="Lib_000106020f010001">m_pAllocator</A></B>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Pointer to the default memory allocator.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="Lib_000106020f010002">m_bFlushing</A></B>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">In the state of flushing; if TRUE, all <A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">IMemInputPin::Receive</A> methods are returned 
with S_FALSE.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="Lib_000106020f010003">m_bReadOnly</A></B>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">If TRUE, indicates that the allocator being used contains samples that are read-only.
</FONT></TD></TR></TABLE>
<A NAME="Lib_000106020f020000"></A><P><B>Member Functions</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070200" TARGET="TEXT">CBaseInputPin</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Constructs a <A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin</A> object.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070a00" TARGET="TEXT">IsReadOnly</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Checks the <A HREF="dssd0195.htm#Lib_000106020f010003" TARGET="TEXT">m_bReadOnly</A> data member and returns its value.

</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070900" TARGET="TEXT">IsFlushing</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Checks the <A HREF="dssd0195.htm#Lib_000106020f010002" TARGET="TEXT">m_bFlushing</A> data member 
 and returns its value.
</FONT></TD></TR></TABLE>
<A NAME="Lib_000106020f030000"></A><P><B>Overridable Member Functions</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070300" TARGET="TEXT">CheckStreaming</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Verifies conditions for continuing with a streaming operation.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070800" TARGET="TEXT">Inactive</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Switches the pin to an inactive state.
</FONT></TD></TR></TABLE>
<A NAME="Lib_000106020f040000"></A><P><B>Implemented IPin Methods</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070100" TARGET="TEXT">BeginFlush</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Informs the pin to begin a flush operation.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070400" TARGET="TEXT">Disconnect</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Releases the stored allocator.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070500" TARGET="TEXT">EndFlush</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Informs the pin to end a flush operation.
</FONT></TD></TR></TABLE>
<A NAME="Lib_000106020f050000"></A><P><B>Implemented IMemInputPin Methods</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070600" TARGET="TEXT">GetAllocator</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Returns the allocator interface that this input pin would like the output pin to use.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070700" TARGET="TEXT">GetAllocatorRequirements</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Indicates an optional method to use if the filter has specific alignment or prefix requirements 
but could use an upstream allocator.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070d00" TARGET="TEXT">NotifyAllocator</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Tells the input pin which allocator the output pin is actually going to use.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070e00" TARGET="TEXT">Receive</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Returns the next block of data from the stream. (Override this method to process a
sample being passed in.)
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070f00" TARGET="TEXT">ReceiveCanBlock</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Determines if sending an <A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">IMemInputPin::Receive</A> method might block.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f071000" TARGET="TEXT">ReceiveMultiple</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Returns the next block of data from the stream. (Override this method to process
samples being passed in.)
</FONT></TD></TR></TABLE>
<A NAME="Lib_000106020f060000"></A><P><B>Implemented INonDelegatingUnknown Methods</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070b00" TARGET="TEXT">NonDelegatingQueryInterface</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Retrieves an interface from the subobject, not the aggregated object.
</FONT></TD></TR></TABLE>
<A NAME="Lib_000106020f070000"></A><P><B>Implemented IQualityControl Methods</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0195.htm#Lib_000106020f070c00" TARGET="TEXT">Notify</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Notifies the recipient that a quality-control change is requested.
(Override on the output pin only. This implementation returns NOERROR.)
</FONT></TD></TR></TABLE>
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070100">CBaseInputPin::BeginFlush</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Informs the pin to begin a flush operation.

<P><B>HRESULT</B> <B>BeginFlush</B><B>(</B><B>void</B><B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns an <A HREF="dssd0293.htm#errcodes_0001060a01000001" TARGET="TEXT">HRESULT</A> value.

<H5>Remarks</H5>
<P>This member function implements the <A HREF="dssd0165.htm#If_000106014d030100" TARGET="TEXT">IPin::BeginFlush</A> method.
When this method is called, the pin is entering flush state. You must
override this method in your derived class, but you should call this base
class first in your implementation, because it sets <A HREF="dssd0195.htm#Lib_000106020f010002" TARGET="TEXT">m_bFlushing</A>
so that no more <A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">IMemInputPin::Receive</A> calls will succeed.

<P>The overriding member function should then carry out the following steps.
<OL><LI>Discard any queued data.
<LI>Free any pin blocked by the <A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">Receive</A> method.
<LI>Pass the <A HREF="dssd0165.htm#If_000106014d030100" TARGET="TEXT">IPin::BeginFlush</A> method to any downstream pins.
</OL>
<P><A HREF="dssd0165.htm#If_000106014d030100" TARGET="TEXT">IPin::BeginFlush</A> is not logically part of the media stream and can
be optimized in the sense that if a pin has passed no data downstream before
this method is called, there is no need to pass this notification on.

<P>An example of an overriding implementation of this member function can be
found in the <A HREF="dssd0248.htm#Lib_0001060244050100" TARGET="TEXT">CTransformInputPin::BeginFlush</A> member function, which
uses the <A HREF="dssd0199.htm#Lib_0001060213040a00" TARGET="TEXT">CBaseOutputPin::DeliverBeginFlush</A> member function to
perform the last step.
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070200">CBaseInputPin::CBaseInputPin</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Constructs a <A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin</A> object.

<P><B>CBaseInputPin::CBaseInputPin</B><B>(</B><BR>&nbsp;&nbsp;<B>TCHAR</B> <I>*pObjectName</I><B>,</B><BR>&nbsp;&nbsp;<B>CBaseFilter</B> <I>*pFilter</I><B>,</B><BR>&nbsp;&nbsp;<B>CCritSec</B> <I>*pLock</I><B>,</B><BR>&nbsp;&nbsp;<B>HRESULT</B> <I>*phr</I><B>,</B><BR>&nbsp;&nbsp;<B>LPCWSTR</B> <I>pPinName</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pObjectName</I>
</DT><DD>Name of the class object.
</DD><DT><I>pFilter</I>
</DT><DD>Pointer to the filter that owns this pin.
</DD><DT><I>pLock</I>
</DT><DD>Pointer to the <A HREF="dssd0210.htm" TARGET="TEXT">CCritSec</A> critical section object used to lock the pin.
</DD><DT><I>phr</I>
</DT><DD>Pointer to the general OLE return value. This value is changed only if this function fails.
</DD><DT><I>pPinName</I>
</DT><DD>Name of the pin.
</DD></DL>
<H5>Return Values</H5>
<P>No return value.
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070300">CBaseInputPin::CheckStreaming</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Verifies conditions for continuing with a streaming operation.

<P><B>virtual</B> <B>HRESULT</B> <B>CheckStreaming</B><B>(</B> <B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns one of the following <A HREF="dssd0293.htm#errcodes_0001060a01000001" TARGET="TEXT">HRESULT</A> values, depending on the state.
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Value </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Meaning
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">S_FALSE </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Currently in flushing state.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">S_OK </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Receive or EndOfStream operations can safely proceed.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0293.htm#errcodes_0001060a01000033" TARGET="TEXT">VFW_E_RUNTIME_ERROR</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Run-time error occurred while processing a previous 
sample.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0293.htm#errcodes_0001060a0100004f" TARGET="TEXT">VFW_E_WRONG_STATE</A> </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Filter is in the State_Stopped state.
</FONT></TD></TR></TABLE>

<H5>Remarks</H5>
<P>Conditions checked in this member function include whether the filter is connected, if it is in an active state, if it is not currently flushing data, and if it has not just issued a run-time error. If all these conditions pass, it returns S_OK.

<P>You can override this member function to add restrictions defined by your derived class. The overriding member function should call this base class implementation to check for conditions here as well.

<P>This function member should be called from any override of the <A HREF="dssd0195.htm#Lib_000106020f070e00" TARGET="TEXT">CBaseInputPin::Receive</A> or <A HREF="dssd0200.htm#Lib_0001060214061200" TARGET="TEXT">CBasePin::EndOfStream</A> member function (or they should do some equivalent check). 
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070400">CBaseInputPin::Disconnect</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Releases the stored allocator.

<P><B>HRESULT</B> <B>Disconnect</B><B>(</B> <B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns an <A HREF="dssd0293.htm#errcodes_0001060a01000001" TARGET="TEXT">HRESULT</A> value.

<H5>Remarks</H5>
<P>This member function overrides the <A HREF="dssd0200.htm#Lib_0001060214060f00" TARGET="TEXT">CBasePin::Disconnect</A> member function. It calls <B>CBasePin::Disconnect</B> first, and then releases the allocator held by <A HREF="dssd0195.htm#Lib_000106020f010001" TARGET="TEXT">m_pAllocator</A>. 
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070500">CBaseInputPin::EndFlush</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Informs the pin to end a flush operation and notifies the pin that it
can start accepting data again.

<P><B>HRESULT</B> <B>EndFlush</B><B>(</B><B>void</B><B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns an <A HREF="dssd0293.htm#errcodes_0001060a01000001" TARGET="TEXT">HRESULT</A> value.

<H5>Remarks</H5>
<P>This member function implements the <A HREF="dssd0165.htm#If_000106014d030600" TARGET="TEXT">IPin::EndFlush</A> method.
When this method is called, the pin is beginning to end a flush operation.
Your derived class must override this member function, but should call
this member function at the end of your implementation
to clear <A HREF="dssd0195.htm#Lib_000106020f010002" TARGET="TEXT">m_bFlushing</A> so that <A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">IMemInputPin::Receive</A> calls
will succeed.

<P>Before calling this base class implementation, your overriding member function
should perform the following steps.
<OL><LI>Ensure that your filter will not push any additional data.
(To do this, synchronize with a thread, stop it pushing, and discard any queued data.)
<LI>Pass the <A HREF="dssd0165.htm#If_000106014d030600" TARGET="TEXT">EndFlush</A> method downstream by calling the
method on the downstream filter's input pin.
</OL>
<P><A HREF="dssd0165.htm#If_000106014d030600" TARGET="TEXT">IPin::EndFlush</A> is not logically part of the media stream. It can
be optimized in the sense that if a pin has passed no data downstream before
this method is called, there is no need to pass this notification on.

<P>An example of an overriding implementation of this member function can be
found in the <A HREF="dssd0248.htm#Lib_0001060244050900" TARGET="TEXT">CTransformInputPin::EndFlush</A> member function,
which uses the <A HREF="dssd0199.htm#Lib_0001060213040b00" TARGET="TEXT">CBaseOutputPin::DeliverEndFlush</A> member function to
perform the last step.
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070600">CBaseInputPin::GetAllocator</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Retrieves the allocator interface that this input pin identifies as the
interface for the output pin to use.

<P><B>HRESULT</B> <B>GetAllocator</B><B>(</B><BR>&nbsp;&nbsp;<B>IMemAllocator</B> <B>**</B> <I>ppAllocator</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>ppAllocator</I>
</DT><DD>Pointer to an obtained <A HREF="dssd0160.htm" TARGET="TEXT">IMemAllocator</A> object.
</DD></DL>
<H5>Return Values</H5>
<P>Default implementation returns either E_OUTOFMEMORY, if an allocator cannot be 
created, or NOERROR upon success.

<H5>Remarks</H5>
<P>This member function implements the <A HREF="dssd0161.htm#If_0001060149030100" TARGET="TEXT">IMemInputPin::GetAllocator</A> method,
which is called by the connected output pin to retrieve an allocator to use
for transporting media samples. By default, this member function creates
a <A HREF="dssd0230.htm" TARGET="TEXT">CMemAllocator</A> object and obtains the <A HREF="dssd0160.htm" TARGET="TEXT">IMemAllocator</A> interface,
to which it adds a reference count for the pin when assigning it to the <A HREF="dssd0195.htm#Lib_000106020f010001" TARGET="TEXT">m_pAllocator</A>
data member, and adds another reference count before passing it back to the output pin.

<P>Override this member function if your filter has another allocator, such as one
from a downstream pin, or a specialized allocator to offer the connected output pin.
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070700">CBaseInputPin::GetAllocatorRequirements</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Optional member function to use if the filter has specific alignment or prefix requirements 
but could use an upstream allocator.

<P><B>HRESULT</B> <B>GetAllocatorRequirements</B><B>(</B><BR>&nbsp;&nbsp;<B>ALLOCATOR_PROPERTIES</B> <B>*</B> <I>pProps</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pProps</I>
</DT><DD><A HREF="dssd0287.htm#structs_0001060501000100" TARGET="TEXT">ALLOCATOR_PROPERTIES</A> structure containing the required size,
count, and alignment of the allocator.
</DD></DL>
<H5>Return Values</H5>
<P>Returns an <A HREF="dssd0293.htm#errcodes_0001060a01000001" TARGET="TEXT">HRESULT</A> value. Returns E_NOTIMPL by default.

<H5>Remarks</H5>
<P>Override this member function if you have specific alignment or prefix requirements
but could use an upstream allocator. 

<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070800">CBaseInputPin::Inactive</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Releases the allocator's memory.

<P><B>HRESULT</B> <B>Inactive</B><B>(</B><B>void</B><B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns an <A HREF="dssd0293.htm#errcodes_0001060a01000001" TARGET="TEXT">HRESULT</A> value.


<H5>Remarks</H5>
<P>This member function is called through <A HREF="dssd0153.htm" TARGET="TEXT">IMediaFilter</A>, which is responsible 
for locking the object first.
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070900">CBaseInputPin::IsFlushing</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Checks the <A HREF="dssd0195.htm#Lib_000106020f010002" TARGET="TEXT">m_bFlushing</A> data member and returns its value.

<P><B>BOOL</B> <B>IsFlushing</B><B>(</B><B>void</B><B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns TRUE if the input pin is flushing data; otherwise, returns FALSE.


<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070a00">CBaseInputPin::IsReadOnly</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Checks the <A HREF="dssd0195.htm#Lib_000106020f010003" TARGET="TEXT">m_bReadOnly</A> data member and returns its value.

<P><B>BOOL</B> <B>IsReadOnly</B><B>(</B><B>void</B><B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns TRUE if the allocator has read-only samples; otherwise, returns FALSE.


<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070b00">CBaseInputPin::NonDelegatingQueryInterface</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Retrieves an interface and increments the reference count.

<P><B>HRESULT</B> <B>NonDelegatingQueryInterface</B><B>(</B><BR>&nbsp;&nbsp;<B>REFIID</B> <I>riid</I><B>,</B><BR>&nbsp;&nbsp;<B>void</B> <B>**</B> <I>ppv</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>riid</I>
 </DT><DD>Reference identifier.
</DD><DT><I>ppv</I>
 </DT><DD>Pointer to the interface.
</DD></DL>
<H5>Return Values</H5>
<P>Returns a pointer to the interface.


<H5>Remarks</H5>
<P>This member function implements the <A HREF="dssd0265.htm#fmutil_0001060309000001" TARGET="TEXT">INonDelegatingUnknown::NonDelegatingQueryInterface</A> method and passes out 
references to the <A HREF="dssd0161.htm" TARGET="TEXT">IMemInputPin</A> and <A HREF="dssd0175.htm" TARGET="TEXT">IUnknown</A> interfaces. Override this class to return other interfaces on the object in the derived class.
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070c00">CBaseInputPin::Notify</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Notifies the recipient that a quality change is requested.

<P><B>HRESULT</B> <B>Notify</B><B>(</B><BR>&nbsp;&nbsp;<B>IBaseFilter</B> <B>*</B> <I>pSelf</I><B>,</B><BR>&nbsp;&nbsp;<B>Quality</B> <I>q</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pSelf</I>
 </DT><DD>Pointer to the filter that is sending the quality notification.
</DD><DT><I>q</I>
 </DT><DD>Quality notification structure.
</DD></DL>
<H5>Return Values</H5>
<P>Returns NOERROR by default.

<H5>Remarks</H5>
<P>The <A HREF="dssd0167.htm#If_000106014f030100" TARGET="TEXT">IQualityControl::Notify</A> method is usually implemented on the output pin, 
because quality-control messages are passed upstream, and not on the input pin.
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070d00">CBaseInputPin::NotifyAllocator</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Notifies the input pin as to which allocator the output pin is actually going to use.

<P><B>HRESULT</B> <B>NotifyAllocator</B><B>(</B><BR>&nbsp;&nbsp;<B>IMemAllocator</B> <B>*</B> <I>pAllocator</I><B>,</B><BR>&nbsp;&nbsp;<B>BOOL</B> <I>bReadOnly</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pAllocator</I>
</DT><DD>Pointer to the <A HREF="dssd0160.htm" TARGET="TEXT">IMemAllocator</A> object to use. This might or might not
be the same <B>IMemAllocator</B> object that the input pin provided in the
<A HREF="dssd0161.htm#If_0001060149030100" TARGET="TEXT">IMemInputPin::GetAllocator</A> method (the output pin could provide its own allocator).
</DD><DT><I>bReadOnly</I>
</DT><DD>Flag to indicate if the samples from this allocator are read-only.
</DD></DL>
<H5>Return Values</H5>
<P>Default implementation returns NOERROR.

<H5>Remarks</H5>
<P>This member function implements the <A HREF="dssd0161.htm#If_0001060149030300" TARGET="TEXT">IMemInputPin::NotifyAllocator</A> method,
which is called by the connected output pin to inform the input pin of the
chosen allocator for the memory transport. Override this member function
if your filter cares about this information. By default, this sets the
<A HREF="dssd0195.htm#Lib_000106020f010001" TARGET="TEXT">m_pAllocator</A> data member to the allocator interface passed in after
adding a reference count to that interface.
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070e00">CBaseInputPin::Receive</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Retrieves the next block of data from the stream.

<P><B>HRESULT</B> <B>Receive</B><B>(</B><BR>&nbsp;&nbsp;<B>IMediaSample</B> <B>*</B> <I>pSample</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pSample</I>
</DT><DD>Pointer to a media sample.
</DD></DL>
<H5>Return Values</H5>
<P>Returns an <A HREF="dssd0293.htm#errcodes_0001060a01000001" TARGET="TEXT">HRESULT</A> value.

<H5>Remarks</H5>
<P>This member function implements the <A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">IMemInputPin::Receive</A> method. It first checks that it can process the sample by calling <A HREF="dssd0195.htm#Lib_000106020f070300" TARGET="TEXT">CBaseInputPin::CheckStreaming</A>; if that member function does not return S_OK, <B>Receive</B> returns immediately with the value returned by <B>CBaseInputPin::CheckStreaming</B>.

<P>This base class member function checks to see if the format has changed with
this media sample; if so, it checks that the filter will accept it, generating a
run-time error if not. If a run-time error is raised, the <A HREF="dssd0200.htm#Lib_0001060214010006" TARGET="TEXT">m_bRunTimeError</A>
data member is set so that no more samples will be accepted.

<P>The overriding member function does something with the passed-in sample,
such as calling a member function to transform it or pass it downstream.

<P>This is a blocking synchronous call. Typically no blocking occurs, but
if a filter cannot process the sample immediately, it can use the calling
application's thread to wait until it can.

<P>Call the <A HREF="dssd0175.htm#If_0001060157030100" TARGET="TEXT">IUnknown::AddRef</A> method if you must hold the returned data block
beyond the completion of the <A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">IMemInputPin::Receive</A> method.
If you call <A HREF="dssd0175.htm#If_0001060157030100" TARGET="TEXT">AddRef</A>, be sure to call <A HREF="dssd0175.htm#If_0001060157030300" TARGET="TEXT">IUnknown::Release</A> when done with it.
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f070f00">CBaseInputPin::ReceiveCanBlock</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Determines if the implementation of the <A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">IMemInputPin::Receive</A> method might block on the connected output pin.

<P><B>HRESULT</B> <B>ReceiveCanBlock</B><B>(</B><B>void</B><B>)</B><B>;</B><BR><H5>Return Values</H5>
<P>Returns an <A HREF="dssd0293.htm#errcodes_0001060a01000001" TARGET="TEXT">HRESULT</A> value, which can include one of the following values.


<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Value </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Meaning
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">S_FALSE 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Input pin will not block on a <A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">Receive</A> method.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">S_OK 
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Input pin might block on a <A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">Receive</A> method.
</FONT></TD></TR></TABLE>

<H5>Remarks</H5>
<P>This member function implements the <A HREF="dssd0161.htm#If_0001060149030500" TARGET="TEXT">IMemInputPin::ReceiveCanBlock</A> method.
The base class implementation calls the <B>IMemInputPin::ReceiveCanBlock</B> method on
the input pin connected to each of the filter's output pins.

<P>This member function is useful because an output pin from a filter might require
notification if its thread might be blocked when it calls the <A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">Receive</A> method on the 
connected input pin. For example, a source filter might prefer to keep reading and buffering data 
rather than be blocked, and might choose to start another thread to wait on the blocking
<B>Receive</B> method. See the <A HREF="dssd0234.htm" TARGET="TEXT">COutputQueue</A> 
base class for queuing samples to input pins that potentially block.
<H3><HR COLOR=#0000FF><A NAME="Lib_000106020f071000">CBaseInputPin::ReceiveMultiple</A></H3>
<A HREF="dssd0195.htm" TARGET="TEXT">CBaseInputPin Class</A>
<P>Retrieves the next block of data from the stream. This method behaves much like the
<A HREF="dssd0161.htm#If_0001060149030400" TARGET="TEXT">IMemInputPin::Receive</A> method, but it works with multiple samples.
Override this function if you can usefully process samples in batches.

<P><B>HRESULT</B> <B>ReceiveMultiple</B><B>(</B><BR>&nbsp;&nbsp;<B>IMediaSample</B> <B>**</B> <I>pSamples</I><B>,</B><BR>&nbsp;&nbsp;<B>long</B> <I>nSamples</I><B>,</B><BR>&nbsp;&nbsp;<B>long</B> <B>*</B> <I>nSamplesProcessed</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pSamples</I>
</DT><DD>Pointer to an array of samples.
</DD><DT><I>nSamples</I>
</DT><DD>Number of samples to process.
</DD><DT><I>nSamplesProcessed</I>
</DT><DD>Number of samples processed.
</DD></DL>
<H5>Return Values</H5>
<P>Returns an <A HREF="dssd0293.htm#errcodes_0001060a01000001" TARGET="TEXT">HRESULT</A> value.

<H5>Remarks</H5>
<P>This member function implements the <A HREF="dssd0161.htm#If_0001060149030600" TARGET="TEXT">IMemInputPin::ReceiveMultiple</A> method.
It is implemented to call the <A HREF="dssd0195.htm#Lib_000106020f070e00" TARGET="TEXT">CBaseInputPin::Receive</A> member function in a loop
for <I>nSamples</I> number of iterations.
<P><P><FONT FACE="MS SANS SERIF" SIZE="1" COLOR="BLACK">
<A CLASS=cpslug HREF="copyrite.htm" TARGET="TEXT">&#169; 1997 Microsoft Corporation. All rights reserved. Terms of Use.</A>
</FONT>
<BR CLEAR=ALL><P>
</FONT><P>
</BODY></HTML>
